import{lineCurvePropType as e,curveFromProp as i,useMotionConfig as r,useAnimatedPath as t,withContainer as a,useDimensions as o,SvgWrapper as n,ResponsiveWrapper as s,useTheme as l}from"@nivo/core";import{Axis as u,renderAxisToCanvas as d}from"@nivo/axes";import c from"prop-types";import{ordinalColorsPropType as h,useOrdinalColorScale as f}from"@nivo/colors";import{useMemo as p,memo as m,useCallback as y,useRef as g,useEffect as v}from"react";import{line as b}from"d3-shape";import{scalePoint as k,scaleLinear as R}from"d3-scale";import{useSpring as O,animated as x}from"@react-spring/web";import{TableTooltip as P,useTooltip as q}from"@nivo/tooltip";import{jsx as w,jsxs as W}from"react/jsx-runtime";function T(){return T=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},T.apply(this,arguments)}var z={key:c.string.isRequired,ticksPosition:c.oneOf(["before","after"]),tickSize:c.number,tickPadding:c.number,tickRotation:c.number,format:c.oneOfType([c.func,c.string]),legend:c.node,legendPosition:c.oneOf(["start","middle","end"]),legendOffset:c.number},S={data:c.arrayOf(c.object).isRequired,variables:c.arrayOf(c.oneOfType([c.shape(T({},z,{key:c.string.isRequired,type:c.oneOf(["point"]).isRequired,padding:c.number,values:c.arrayOf(c.oneOfType([c.string,c.number])),tickValues:c.arrayOf(c.oneOfType([c.string,c.number]))})),c.shape(T({},z,{type:c.oneOf(["linear"]).isRequired,min:c.oneOfType([c.number,c.oneOf(["auto"])]),max:c.oneOfType([c.number,c.oneOf(["auto"])]),tickValues:c.oneOfType([c.number,c.arrayOf(c.number)])}))])).isRequired,layout:c.oneOf(["horizontal","vertical"]).isRequired,curve:e.isRequired,strokeWidth:c.number.isRequired,lineOpacity:c.number.isRequired,axesPlan:c.oneOf(["foreground","background"]).isRequired,axesTicksPosition:c.oneOf(["before","after"]).isRequired,colors:h.isRequired},C=T({},S,{role:c.string.isRequired}),M={layout:"horizontal",curve:"linear",colors:{scheme:"yellow_orange_red"},strokeWidth:2,lineOpacity:.35,axesPlan:"foreground",axesTicksPosition:"after",animate:!0,motionConfig:"gentle"},j=T({},M,{role:"img"}),G=function(e){var r=e.width,t=e.height,a=e.data,o=e.variables,n=e.layout,s=e.colors,l=e.curve,u=f(s,"index"),d=p((function(){return b().x((function(e){return e.x})).y((function(e){return e.y})).curve(i(l))}),[l]),c=p((function(){return function(e){var i=e.width,r=e.height,t=e.data,a=e.variables,o=e.layout,n=k().range("horizontal"===o?[0,i]:[r,0]).domain(a.map((function(e){return e.key}))),s="horizontal"===o?[r,0]:[0,i],l=a.map((function(e){var i,r=new Set;if(t.forEach((function(i){return r.add(i[e.key])})),"linear"===e.type){var a=void 0!==e.min&&"auto"!==e.min?e.min:Math.min.apply(Math,Array.from(r)),o=void 0!==e.max&&"auto"!==e.max?e.max:Math.max.apply(Math,Array.from(r));i=R().rangeRound(s).domain([a,o])}return"point"===e.type&&(i=k().range(s).domain(e.values||r),void 0!==e.padding&&i.padding(e.padding)),T({},e,{scale:i,values:Array.from(r)})})),u=t.map((function(e,i){var r=l.map((function(i){return{x:"horizontal"===o?n(i.key):i.scale(e[i.key]),y:"horizontal"===o?i.scale(e[i.key]):n(i.key)}}));return T({index:i},e,{points:r})}));return{variablesScale:n,variablesWithScale:l,dataWithPoints:u}}({width:r,height:t,data:a,variables:o,layout:n})}),[r,t,a,o,n]);return{variablesScale:c.variablesScale,variablesWithScale:c.variablesWithScale,dataWithPoints:c.dataWithPoints,getLineColor:u,lineGenerator:d}},L=function(e){var i=e.data,r=e.variables;return w(P,{rows:r.map((function(e){return[e.key,w("strong",{children:i[e.key]})]}))})};L.propTypes={data:c.object.isRequired,variables:c.arrayOf(c.shape({key:c.oneOfType([c.string,c.number]).isRequired})).isRequired};var A=m(L),E=function(e){var i=e.data,a=e.variables,o=e.lineGenerator,n=e.points,s=e.strokeWidth,l=e.color,u=e.opacity,d=q(),c=d.showTooltipFromEvent,h=d.hideTooltip,f=y((function(e){c(w(A,{data:i,variables:a}),e)}),[i,a]),p=r(),m=p.animate,g=p.config,v=t(o(n)),b=O({color:l,opacity:u,config:g,immediate:!m});return w(x.path,{d:v,stroke:b.color,strokeWidth:s,strokeLinecap:"round",opacity:b.opacity,fill:"none",onMouseEnter:f,onMouseMove:f,onMouseLeave:h})};E.propTypes={data:c.object.isRequired,variables:c.arrayOf(c.shape({key:c.oneOfType([c.string,c.number]).isRequired})).isRequired,lineGenerator:c.func.isRequired,points:c.arrayOf(c.shape({x:c.number.isRequired,y:c.number.isRequired})).isRequired,strokeWidth:c.number.isRequired,color:c.string.isRequired,opacity:c.number.isRequired};var H=m(E),V=function(e){var i=e.data,r=e.variables,t=e.layout,a=e.width,s=e.height,l=e.margin,d=e.axesPlan,c=e.axesTicksPosition,h=e.strokeWidth,f=e.lineOpacity,p=e.curve,m=e.colors,y=e.role,g=o(a,s,l),v=g.margin,b=g.innerWidth,k=g.innerHeight,R=g.outerWidth,O=g.outerHeight,x=G({width:b,height:k,data:i,variables:r,layout:t,colors:m,curve:p}),P=x.variablesScale,q=x.variablesWithScale,T=x.dataWithPoints,z=x.lineGenerator,S=x.getLineColor,C=q.map((function(e){return w(u,{axis:"horizontal"===t?"y":"x",length:"horizontal"===t?k:b,x:"horizontal"===t?P(e.key):0,y:"horizontal"===t?0:P(e.key),scale:e.scale,ticksPosition:e.ticksPosition||c,tickValues:e.tickValues,tickSize:e.tickSize,tickPadding:e.tickPadding,tickRotation:e.tickRotation,format:e.tickFormat,legend:e.legend,legendPosition:e.legendPosition,legendOffset:e.legendOffset},e.key)}));return W(n,{width:R,height:O,margin:v,role:y,children:["background"===d&&C,T.map((function(e){return w(H,{data:e,variables:r,lineGenerator:z,points:e.points,strokeWidth:h,opacity:f,color:S(e)},e.index)})),"foreground"===d&&C]})};V.propTypes=C;var F=a(V);F.defaultProps=j;var _=function(e){return w(s,{children:function(i){var r=i.width,t=i.height;return w(F,T({width:r,height:t},e))}})},B=function(e){var i=e.data,r=e.layout,t=e.variables,a=e.width,n=e.height,s=e.margin,u=e.curve,c=e.colors,h=e.lineOpacity,f=e.strokeWidth,p=e.axesTicksPosition,m=e.pixelRatio,y=g(null),b=o(a,n,s),k=b.margin,R=b.innerWidth,O=b.innerHeight,x=b.outerWidth,P=b.outerHeight,q=G({width:R,height:O,data:i,variables:t,layout:r,colors:c,curve:u}),W=q.variablesScale,T=q.variablesWithScale,z=q.dataWithPoints,S=q.lineGenerator,C=q.getLineColor,M=l();return v((function(){y.current.width=x*m,y.current.height=P*m;var e=y.current.getContext("2d");e.scale(m,m),e.fillStyle=M.background,e.fillRect(0,0,x,P),e.translate(k.left,k.top),S.context(e),z.forEach((function(i){e.save(),e.globalAlpha=h,e.beginPath(),S(i.points),e.strokeStyle=C(i),e.lineWidth=f,e.stroke(),e.restore()})),T.map((function(i){d(e,{axis:"horizontal"===r?"y":"x",scale:i.scale,x:"horizontal"===r?W(i.key):0,y:"horizontal"===r?0:W(i.key),length:"horizontal"===r?O:R,ticksPosition:p,theme:M})}))}),[y,x,P,R,O,k,S,C,h,f,z,T,r,p,M,m]),w("canvas",{ref:y,width:x*m,height:P*m,style:{width:x,height:P}})};B.propTypes=T({},S,{pixelRatio:c.number.isRequired});var D=a(B);D.defaultProps=T({},M,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1});var I=function(e){return w(s,{children:function(i){var r=i.width,t=i.height;return w(D,T({width:r,height:t},e))}})};export{F as ParallelCoordinates,D as ParallelCoordinatesCanvas,_ as ResponsiveParallelCoordinates,I as ResponsiveParallelCoordinatesCanvas,M as commonDefaultProps,S as commonPropTypes,j as svgDefaultProps,C as svgPropTypes};
//# sourceMappingURL=nivo-parallel-coordinates.es.js.map
