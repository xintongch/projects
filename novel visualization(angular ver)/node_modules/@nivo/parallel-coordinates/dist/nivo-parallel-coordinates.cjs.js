"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@nivo/core"),t=require("@nivo/axes"),a=require("prop-types"),i=require("@nivo/colors"),r=require("react"),o=require("d3-shape"),n=require("d3-scale"),l=require("@react-spring/web"),u=require("@nivo/tooltip"),s=require("react/jsx-runtime");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=d(a);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},c.apply(this,arguments)}var p={key:f.default.string.isRequired,ticksPosition:f.default.oneOf(["before","after"]),tickSize:f.default.number,tickPadding:f.default.number,tickRotation:f.default.number,format:f.default.oneOfType([f.default.func,f.default.string]),legend:f.default.node,legendPosition:f.default.oneOf(["start","middle","end"]),legendOffset:f.default.number},h={data:f.default.arrayOf(f.default.object).isRequired,variables:f.default.arrayOf(f.default.oneOfType([f.default.shape(c({},p,{key:f.default.string.isRequired,type:f.default.oneOf(["point"]).isRequired,padding:f.default.number,values:f.default.arrayOf(f.default.oneOfType([f.default.string,f.default.number])),tickValues:f.default.arrayOf(f.default.oneOfType([f.default.string,f.default.number]))})),f.default.shape(c({},p,{type:f.default.oneOf(["linear"]).isRequired,min:f.default.oneOfType([f.default.number,f.default.oneOf(["auto"])]),max:f.default.oneOfType([f.default.number,f.default.oneOf(["auto"])]),tickValues:f.default.oneOfType([f.default.number,f.default.arrayOf(f.default.number)])}))])).isRequired,layout:f.default.oneOf(["horizontal","vertical"]).isRequired,curve:e.lineCurvePropType.isRequired,strokeWidth:f.default.number.isRequired,lineOpacity:f.default.number.isRequired,axesPlan:f.default.oneOf(["foreground","background"]).isRequired,axesTicksPosition:f.default.oneOf(["before","after"]).isRequired,colors:i.ordinalColorsPropType.isRequired},y=c({},h,{role:f.default.string.isRequired}),v={layout:"horizontal",curve:"linear",colors:{scheme:"yellow_orange_red"},strokeWidth:2,lineOpacity:.35,axesPlan:"foreground",axesTicksPosition:"after",animate:!0,motionConfig:"gentle"},g=c({},v,{role:"img"}),m=function(t){var a=t.width,l=t.height,u=t.data,s=t.variables,d=t.layout,f=t.colors,p=t.curve,h=i.useOrdinalColorScale(f,"index"),y=r.useMemo((function(){return o.line().x((function(e){return e.x})).y((function(e){return e.y})).curve(e.curveFromProp(p))}),[p]),v=r.useMemo((function(){return function(e){var t=e.width,a=e.height,i=e.data,r=e.variables,o=e.layout,l=n.scalePoint().range("horizontal"===o?[0,t]:[a,0]).domain(r.map((function(e){return e.key}))),u="horizontal"===o?[a,0]:[0,t],s=r.map((function(e){var t,a=new Set;if(i.forEach((function(t){return a.add(t[e.key])})),"linear"===e.type){var r=void 0!==e.min&&"auto"!==e.min?e.min:Math.min.apply(Math,Array.from(a)),o=void 0!==e.max&&"auto"!==e.max?e.max:Math.max.apply(Math,Array.from(a));t=n.scaleLinear().rangeRound(u).domain([r,o])}return"point"===e.type&&(t=n.scalePoint().range(u).domain(e.values||a),void 0!==e.padding&&t.padding(e.padding)),c({},e,{scale:t,values:Array.from(a)})})),d=i.map((function(e,t){var a=s.map((function(t){return{x:"horizontal"===o?l(t.key):t.scale(e[t.key]),y:"horizontal"===o?t.scale(e[t.key]):l(t.key)}}));return c({index:t},e,{points:a})}));return{variablesScale:l,variablesWithScale:s,dataWithPoints:d}}({width:a,height:l,data:u,variables:s,layout:d})}),[a,l,u,s,d]);return{variablesScale:v.variablesScale,variablesWithScale:v.variablesWithScale,dataWithPoints:v.dataWithPoints,getLineColor:h,lineGenerator:y}},b=function(e){var t=e.data,a=e.variables;return s.jsx(u.TableTooltip,{rows:a.map((function(e){return[e.key,s.jsx("strong",{children:t[e.key]})]}))})};b.propTypes={data:f.default.object.isRequired,variables:f.default.arrayOf(f.default.shape({key:f.default.oneOfType([f.default.string,f.default.number]).isRequired})).isRequired};var x=r.memo(b),k=function(t){var a=t.data,i=t.variables,o=t.lineGenerator,n=t.points,d=t.strokeWidth,f=t.color,c=t.opacity,p=u.useTooltip(),h=p.showTooltipFromEvent,y=p.hideTooltip,v=r.useCallback((function(e){h(s.jsx(x,{data:a,variables:i}),e)}),[a,i]),g=e.useMotionConfig(),m=g.animate,b=g.config,k=e.useAnimatedPath(o(n)),P=l.useSpring({color:f,opacity:c,config:b,immediate:!m});return s.jsx(l.animated.path,{d:k,stroke:P.color,strokeWidth:d,strokeLinecap:"round",opacity:P.opacity,fill:"none",onMouseEnter:v,onMouseMove:v,onMouseLeave:y})};k.propTypes={data:f.default.object.isRequired,variables:f.default.arrayOf(f.default.shape({key:f.default.oneOfType([f.default.string,f.default.number]).isRequired})).isRequired,lineGenerator:f.default.func.isRequired,points:f.default.arrayOf(f.default.shape({x:f.default.number.isRequired,y:f.default.number.isRequired})).isRequired,strokeWidth:f.default.number.isRequired,color:f.default.string.isRequired,opacity:f.default.number.isRequired};var P=r.memo(k),R=function(a){var i=a.data,r=a.variables,o=a.layout,n=a.width,l=a.height,u=a.margin,d=a.axesPlan,f=a.axesTicksPosition,c=a.strokeWidth,p=a.lineOpacity,h=a.curve,y=a.colors,v=a.role,g=e.useDimensions(n,l,u),b=g.margin,x=g.innerWidth,k=g.innerHeight,R=g.outerWidth,q=g.outerHeight,O=m({width:x,height:k,data:i,variables:r,layout:o,colors:y,curve:h}),T=O.variablesScale,w=O.variablesWithScale,W=O.dataWithPoints,j=O.lineGenerator,C=O.getLineColor,S=w.map((function(e){return s.jsx(t.Axis,{axis:"horizontal"===o?"y":"x",length:"horizontal"===o?k:x,x:"horizontal"===o?T(e.key):0,y:"horizontal"===o?0:T(e.key),scale:e.scale,ticksPosition:e.ticksPosition||f,tickValues:e.tickValues,tickSize:e.tickSize,tickPadding:e.tickPadding,tickRotation:e.tickRotation,format:e.tickFormat,legend:e.legend,legendPosition:e.legendPosition,legendOffset:e.legendOffset},e.key)}));return s.jsxs(e.SvgWrapper,{width:R,height:q,margin:b,role:v,children:["background"===d&&S,W.map((function(e){return s.jsx(P,{data:e,variables:r,lineGenerator:j,points:e.points,strokeWidth:c,opacity:p,color:C(e)},e.index)})),"foreground"===d&&S]})};R.propTypes=y;var q=e.withContainer(R);q.defaultProps=g;var O=function(a){var i=a.data,o=a.layout,n=a.variables,l=a.width,u=a.height,d=a.margin,f=a.curve,c=a.colors,p=a.lineOpacity,h=a.strokeWidth,y=a.axesTicksPosition,v=a.pixelRatio,g=r.useRef(null),b=e.useDimensions(l,u,d),x=b.margin,k=b.innerWidth,P=b.innerHeight,R=b.outerWidth,q=b.outerHeight,O=m({width:k,height:P,data:i,variables:n,layout:o,colors:c,curve:f}),T=O.variablesScale,w=O.variablesWithScale,W=O.dataWithPoints,j=O.lineGenerator,C=O.getLineColor,S=e.useTheme();return r.useEffect((function(){g.current.width=R*v,g.current.height=q*v;var e=g.current.getContext("2d");e.scale(v,v),e.fillStyle=S.background,e.fillRect(0,0,R,q),e.translate(x.left,x.top),j.context(e),W.forEach((function(t){e.save(),e.globalAlpha=p,e.beginPath(),j(t.points),e.strokeStyle=C(t),e.lineWidth=h,e.stroke(),e.restore()})),w.map((function(a){t.renderAxisToCanvas(e,{axis:"horizontal"===o?"y":"x",scale:a.scale,x:"horizontal"===o?T(a.key):0,y:"horizontal"===o?0:T(a.key),length:"horizontal"===o?P:k,ticksPosition:y,theme:S})}))}),[g,R,q,k,P,x,j,C,p,h,W,w,o,y,S,v]),s.jsx("canvas",{ref:g,width:R*v,height:q*v,style:{width:R,height:q}})};O.propTypes=c({},h,{pixelRatio:f.default.number.isRequired});var T=e.withContainer(O);T.defaultProps=c({},v,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1});exports.ParallelCoordinates=q,exports.ParallelCoordinatesCanvas=T,exports.ResponsiveParallelCoordinates=function(t){return s.jsx(e.ResponsiveWrapper,{children:function(e){var a=e.width,i=e.height;return s.jsx(q,c({width:a,height:i},t))}})},exports.ResponsiveParallelCoordinatesCanvas=function(t){return s.jsx(e.ResponsiveWrapper,{children:function(e){var a=e.width,i=e.height;return s.jsx(T,c({width:a,height:i},t))}})},exports.commonDefaultProps=v,exports.commonPropTypes=h,exports.svgDefaultProps=g,exports.svgPropTypes=y;
//# sourceMappingURL=nivo-parallel-coordinates.cjs.js.map
